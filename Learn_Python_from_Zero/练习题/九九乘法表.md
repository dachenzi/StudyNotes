<font size=5 face='微软雅黑'>__文章目录__</font>
<!-- TOC -->

- [打印九九乘法表](#打印九九乘法表)
- [1 降低问题复杂度](#1-降低问题复杂度)
- [2 获取对角线下半部部分](#2-获取对角线下半部部分)
- [3 调整循环次数](#3-调整循环次数)
- [4 调整间距](#4-调整间距)
- [5 使用三元云算符惊喜调整间隔](#5-使用三元云算符惊喜调整间隔)
- [6 利用format优化显示](#6-利用format优化显示)
- [7 利用print进行优化](#7-利用print进行优化)
- [8 三行搞定终极版](#8-三行搞定终极版)
- [9 就这么完了吗？](#9-就这么完了吗)

<!-- /TOC -->

---

# 打印九九乘法表
现在有需求，请使用 Python 尽可能少的代码，打印如下九九乘法表
```bash
1*1=1  
2*1=2  2*2=4  
3*1=3  3*2=6  3*3=9  
4*1=4  4*2=8  4*3=12 4*4=16 
5*1=5  5*2=10 5*3=15 5*4=20 5*5=25 
6*1=6  6*2=12 6*3=18 6*4=24 6*5=30 6*6=36 
7*1=7  7*2=14 7*3=21 7*4=28 7*5=35 7*6=42 7*7=49 
8*1=8  8*2=16 8*3=24 8*4=32 8*5=40 8*6=48 8*7=56 8*8=64 
9*1=9  9*2=18 9*3=27 9*4=36 9*5=45 9*6=54 9*7=63 9*8=72 9*9=81 
```
# 1 降低问题复杂度
首先我可以先打一个九乘九的矩阵，假设当前我们只了解字符串拼接
```python
for i in range(1, 10):
    line = ''
    for j in range(1, 10):
        line += str(j) + '*' + str(i) + '=' + str(i*j) + ' '
    print(line)

# 结果
1*1=1 2*1=2 3*1=3 4*1=4 5*1=5 6*1=6 7*1=7 8*1=8 9*1=9 
1*2=2 2*2=4 3*2=6 4*2=8 5*2=10 6*2=12 7*2=14 8*2=16 9*2=18 
1*3=3 2*3=6 3*3=9 4*3=12 5*3=15 6*3=18 7*3=21 8*3=24 9*3=27 
1*4=4 2*4=8 3*4=12 4*4=16 5*4=20 6*4=24 7*4=28 8*4=32 9*4=36 
1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 6*5=30 7*5=35 8*5=40 9*5=45 
1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 7*6=42 8*6=48 9*6=54 
1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 8*7=56 9*7=63 
1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 9*8=72 
1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 
```
通过字符串拼接我们打印出了一个9*9的矩形，我们观察这个矩形和目标图形的差别，发现只需要从对角线分割，取下半部分即可，观察i和j的关系，发现只需要满足i>=j即可

# 2 获取对角线下半部部分
```python
for i in range(1,10):
    line = ''
    for j in range(1,10):
        if i>=j:
            line += str(j) + '+' + str(i) + '=' + str(i*j) + ' '
    print(line)

# 结果
1+1=1 
1+2=2 2+2=4 
1+3=3 2+3=6 3+3=9 
1+4=4 2+4=8 3+4=12 4+4=16 
1+5=5 2+5=10 3+5=15 4+5=20 5+5=25 
1+6=6 2+6=12 3+6=18 4+6=24 5+6=30 6+6=36 
1+7=7 2+7=14 3+7=21 4+7=28 5+7=35 6+7=42 7+7=49 
1+8=8 2+8=16 3+8=24 4+8=32 5+8=40 6+8=48 7+8=56 8+8=64 
1+9=9 2+9=18 3+9=27 4+9=36 5+9=45 6+9=54 7+9=63 8+9=72 9+9=81 
```
虽然打出了我们想要的形状，但是我们发现内层循环依旧多循环了10-i次，这是无用的，我们需要对内层循环继续进行优化

# 3 调整循环次数
```python
for i in range(1,10):
    line = ''
    for j in range(1,i+1):
        line += str(j) + '*' + str(i) + '=' + str(i*j) + ' '
    print(line)

# 结果
1+1=1 
1+2=2 2+2=4 
1+3=3 2+3=6 3+3=9 
1+4=4 2+4=8 3+4=12 4+4=16 
1+5=5 2+5=10 3+5=15 4+5=20 5+5=25 
1+6=6 2+6=12 3+6=18 4+6=24 5+6=30 6+6=36 
1+7=7 2+7=14 3+7=21 4+7=28 5+7=35 6+7=42 7+7=49 
1+8=8 2+8=16 3+8=24 4+8=32 5+8=40 6+8=48 7+8=56 8+8=64 
1+9=9 2+9=18 3+9=27 4+9=36 5+9=45 6+9=54 7+9=63 8+9=72 9+9=81
```
追求完美的人绝不会这么轻易的放弃，我们发现第3列的数据没有和其他行对其，那么我们考虑如何进行对齐显示
	
# 4 调整间距
我们在每一行段的默认添加一个`\t制表符`，用于对其
```python
# 追加符号版本
for i in range(1,10):
    line = ''
    for j in range(1,i+1):
        line += str(j) + '+' + str(i) + '=' + str(i*j) + '\t'
    print(line)

# 结果
1+1=1	
1+2=2	2+2=4	
1+3=3	2+3=6	3+3=9	
1+4=4	2+4=8	3+4=12	4+4=16	
1+5=5	2+5=10	3+5=15	4+5=20	5+5=25	
1+6=6	2+6=12	3+6=18	4+6=24	5+6=30	6+6=36	
1+7=7	2+7=14	3+7=21	4+7=28	5+7=35	6+7=42	7+7=49	
1+8=8	2+8=16	3+8=24	4+8=32	5+8=40	6+8=48	7+8=56	8+8=64	
1+9=9	2+9=18	3+9=27	4+9=36	5+9=45	6+9=54	7+9=63	8+9=72	9+9=81
```
间距太大了有木有啊，如何精细的调整

# 5 使用三元云算符惊喜调整间隔
观察乘法表，我们发现，当j等于1时，乘积结果都为个位数，为了好看，只需要空2个空格即可，而当乘积大于10时就需要使用3个空格了，这是我们使用三元运算符进行修改
```python
for i in range(1,10):
    line = ''
    for j in range(1,i+1):
        product = i*j
        spaces = '  ' if j > 1 and product < 10 else ' ' # 三元表达式
        line += str(j) + '+' + str(i) + '=' + str(product) + spaces
    print(line)

# 结果
1+1=1 
1+2=2 2+2=4  
1+3=3 2+3=6  3+3=9  
1+4=4 2+4=8  3+4=12 4+4=16 
1+5=5 2+5=10 3+5=15 4+5=20 5+5=25 
1+6=6 2+6=12 3+6=18 4+6=24 5+6=30 6+6=36 
1+7=7 2+7=14 3+7=21 4+7=28 5+7=35 6+7=42 7+7=49 
1+8=8 2+8=16 3+8=24 4+8=32 5+8=40 6+8=48 7+8=56 8+8=64 
1+9=9 2+9=18 3+9=27 4+9=36 5+9=45 6+9=54 7+9=63 8+9=72 9+9=81 
```
是不是好看多了？但是代码看起来太臃肿了，用字符串拼接看起来也太low，这时我们可以使用字符串格式化优化代码
	
# 6 利用format优化显示
字符串的format函数功能非常强大，如果在python3中你使用`占位符%`进行替换，那么你也太不pythoner了，python3中推荐使用format函数，具体方法可以自行百度。
```python
for i in range(1, 10):
    line = ''
    for j in range(1, i+1):
        line += '{}*{}={:<{}}'.format(j, i, i*j, 2 if j == 1 else 3)
    print(line)

#结果
1*1=1 
1*2=2 2*2=4  
1*3=3 2*3=6  3*3=9  
1*4=4 2*4=8  3*4=12 4*4=16 
1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 
1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 
1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 
1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 
1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 
```	

# 7 利用print进行优化
很多人做到这里就会很满意，但是代码还有优化的空间，每趟循环我们直接打印，不进行字符串拼接可以吗？当然可以
```python
for i in range(1, 10):
    for j in range(1, i+1):
        print('{}*{}={:<{}}'.format(j, i, i*j, 2 if j == 1 else 3), end='')
    print()

# 结果
1*1=1 
1*2=2 2*2=4  
1*3=3 2*3=6  3*3=9  
1*4=4 2*4=8  3*4=12 4*4=16 
1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 
1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 
1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 
1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 
1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 
```
# 8 三行搞定终极版
代码是否还有缩减的空间？当然是可以的，下面就是三行终极版
```python
for i in range(1, 10):
    for j in range(1, i+1):
        print('{}*{}={:<{}}'.format(j, i, i*j, 2 if j == 1 else 3), end='\n' if j == i else '')

# 结果
1*1=1 
1*2=2 2*2=4  
1*3=3 2*3=6  3*3=9  
1*4=4 2*4=8  3*4=12 4*4=16 
1*5=5 2*5=10 3*5=15 4*5=20 5*5=25 
1*6=6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 
1*7=7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 
1*8=8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 
1*9=9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 
```

# 9 就这么完了吗？
你以为就这么简单？学会了这种方法，当然会有变式，请使用足够少的代码打印下列九九乘法表
```bash
  1*1=1  1*2=2  1*3=3  1*4=4  1*5=5  1*6=6  1*7=7  1*8=8  1*9=9  
         2*2=4  2*3=6  2*4=8  2*5=10 2*6=12 2*7=14 2*8=16 2*9=18 
                3*3=9  3*4=12 3*5=15 3*6=18 3*7=21 3*8=24 3*9=27 
                       4*4=16 4*5=20 4*6=24 4*7=28 4*8=32 4*9=36 
                              5*5=25 5*6=30 5*7=35 5*8=40 5*9=45 
                                     6*6=36 6*7=42 6*8=48 6*9=54 
                                            7*7=49 7*8=56 7*9=63 
                                                   8*8=64 8*9=72 
                                                          9*9=81 
```
参考答案：
```python
(1)
for i in range(1, 10):
    line = ''
    for j in range(i,10):
        line += "{}*{}={:<{}}".format(i, j, i*j, 3 if j >= i else 2)
    print('{:>65}'.format(line))


(2)
for i in range(1, 10):
    for j in range(i, 10):
        print("{}{}*{}={:<{}}".format(7*' '*(i-1) if j == i else '', i, j, i*j, 3 if j >= i else 2), end='\n' if j == 9 else '')
```